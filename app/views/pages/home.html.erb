<div class="home-container">
  <div id="carouselExampleIndicators" class="carousel rel slide carousel-fade" data-ride="carousel" data-pause="false">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
      <!-- Slide One - Set the background image for this slide in the line below -->
      <div class="carousel-item active banner_one">
        <div class="carousel-caption d-md-block">
          <%= link_to project_path(@homepage.project_one), class: "no-hover" do  %>
            <h2 class="display-4">
              <%= @homepage.project_one.name %>
            </h2>
          </div>
          <% end %>
      </div>
      <style>
        @media screen and (min-width: 767px) {
          .banner_one {
            background-image: url('<%= cl_image_path(@homepage.project_one.photo.present? ? @homepage.project_one.photo : @homepage.project_one.photos.first.url) %>');
          }
        }
        @media screen and (max-width: 766.95px) {
          .banner_one {
            background-image: url('<%= cl_image_path(@homepage.project_one.mobile_photo.present? ? @homepage.project_one.mobile_photo : @homepage.project_one.photos.first.url) %>');
          }
        }
      </style>
      <!-- project Two - Set the background image for this project in the line below -->
      <div class="carousel-item banner_two">
        <div class="carousel-caption d-md-block">
          <%= link_to project_path(@homepage.project_two), class: "no-hover" do %>
            <h2 class="display-4">
              <%= @homepage.project_two.name %>
            </h2>
          <% end %>
        </div>
      </div>
      <style>
        @media screen and (min-width: 767px) {
          .banner_two {
            background-image: url('<%= cl_image_path(@homepage.project_two.photo.present? ? @homepage.project_two.photo : @homepage.project_two.photos.first.url) %>');
          }
        }
        @media screen and (max-width: 766.95px) {
          .banner_two {
            background-image: url('<%= cl_image_path(@homepage.project_two.mobile_photo.present? ? @homepage.project_two.mobile_photo : @homepage.project_two.photos.first.url) %>');
          }
        }
      </style>
      <!-- project Three - Set the background image for this project in the line below -->
      <div class="carousel-item banner_three">
        <div class="carousel-caption d-md-block">
          <%= link_to project_path(@homepage.project_three), class: "no-hover" do %>
            <h2 class="display-4">
              <%= @homepage.project_three.name %>
            </h2>
          <% end %>
        </div>
      </div>
      <style>
        @media screen and (min-width: 767px) {
          .banner_three {
            background-image: url('<%= cl_image_path(@homepage.project_three.photo.present? ? @homepage.project_three.photo : @homepage.project_three.photos.first.url) %>');
          }
        }
        @media screen and (max-width: 766.95px) {
          .banner_three {
            background-image: url('<%= cl_image_path(@homepage.project_three.mobile_photo.present? ? @homepage.project_three.mobile_photo : @homepage.project_three.photos.first.url) %>');
          }
        }
      </style>
      <div class="carousel-item banner_four">
        <div class="carousel-caption d-md-block">
          <%= link_to project_path(@homepage.project_four), class: "no-hover" do %>
            <h2 class="display-4">
              <%= @homepage.project_four.name %>
            </h2>
          <% end %>
        </div>
      </div>
      <style>
        @media screen and (min-width: 767px) {
          .banner_four {
            background-image: url('<%= cl_image_path(@homepage.project_four.photo.present? ? @homepage.project_four.photo : @homepage.project_four.photos.first.url) %>');
          }
        }
        @media screen and (max-width: 766.95px) {
          .banner_four {
            background-image: url('<%= cl_image_path(@homepage.project_four.mobile_photo.present? ? @homepage.project_four.mobile_photo : @homepage.project_four.photos.first.url) %>');
          }
        }
      </style>
    </div>
  </div>

  <div class="bg" style="background-image: url(<%= asset_path("w.png") %>);">
    <div class="container">
      <div class="tc">
        <%= @homepage.homepage_content %>
      </div>
    </div>

    <div class="main-text">
      <h3 class="index-header"><%= @homepage.work_title %></h3>
    </div>

    <div class="home-latest-work">
      <div class="container">
        <div class="row">
          <% @projects.each do |project| %>
            <div class="col-xs-12 col-sm-6 col-md-4">
              <%= link_to project_path(project) do %>
                <div class="latest-work-card" style="background-image: url(<%= project.photos.empty? ? image_path("James-wolf.png") : cl_image_path(project.photos.order(created_at: :desc).first.url, :format => :jpeg, :quality => 40, :width => 300)%>);">
                  <div class="latest-work-title"><%= project.sub.present? ? project.sub&.split&.map(&:capitalize)&.join(" ") : project.name %></div>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="dcen m-5v">
      <%= link_to new_contact_path do %>
        <button type="button" class="btn btn-primary">
          Get in touch
        </button>
      <% end %>
    </div>
  </div>


  <div class="home-video">
    <div class="player">

      <video class="player__video viewer" id="video_home" loop="true" autoplay muted>
        <source id="video-source" data-src="https://res.cloudinary.com/hoxton-digital/video/upload/v1548677529/Origwolves_of_scotland_1280x676_1_1_1.mp4" type="video/mp4">
      </video>
      <div class="video-logo-holder">
        <div class="volume-toggle">
          <%= image_tag "volume_on.png", class:"volume-logo hidden", id: "volume_on" %>
          <%= image_tag "volume_off.png", class:"volume-logo", id: "volume_off" %>
        </div>
        <%= link_to 'https://vimeo.com/310202492', target: "_blank" do %>
          <%= image_tag 'video-link.png', class: "video-text"  %>
        <% end %>
      </div>
    </div>
  </div>
</div>


<script>
  const video = document.getElementById("video_home");
  const volumeOn = document.getElementById("volume_on");
  const volumeOff = document.getElementById("volume_off");
  const vid = document.getElementById("video_home");

  const width = window.screen.width
  const src = document.getElementById("video-source").getAttribute('data-src')
  if (width > 900) {
    vid.setAttribute('src', src)
  }
  volumeOff.addEventListener('click', function() {
    volumeOn.classList.toggle("hidden");
    volumeOff.classList.toggle("hidden");
    video.muted = false;
  });

  volumeOn.addEventListener('click', function() {
    volumeOn.classList.toggle("hidden");
    volumeOff.classList.toggle("hidden");
    video.muted = true;
  });



  vid.onloadeddata = function() {
    vid.style.opacity = 1
  };


</script>

